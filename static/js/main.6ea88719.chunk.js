(this["webpackJsonplogin-app"]=this["webpackJsonplogin-app"]||[]).push([[0],{25:function(n,e,t){n.exports=t(36)},36:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),i=t(20),o=t.n(i),l=t(14),c=t(11),s=t(1),d=t(12),u=t(13);function p(){var n=Object(d.a)(["\n.container{\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  font-family: Arial;\n\n  button{\n    all: unset;\n    width: 100px;\n    height: 35px;\n    margin: 10px 10px 0 0;\n    align-self: flex-end;\n    background-color: #0041C2;\n    color: #fff;\n    text-align: center;\n    border-radius: 3px;\n    border: 1px solid #0041C2;\n\n    &:hover{\n      background-color: #fff;\n      color: #0041C2;\n    }\n  }\n\n  >div{\n    height: 100%;\n    width: 100%;\n    display: flex;\n    font-size: 18px;\n    justify-content: center;\n    align-items: center;\n\n    .content{\n      display: flex;\n      flex-direction: column;\n      padding: 20px 100px;    \n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      width: auto;\n  \n      img{\n        height: 150px;\n        width: 150px;\n        border-radius: 50%;\n      }\n  \n      >span:nth-child(2){\n        margin-top: 20px;\n        font-weight: bold;\n      }\n  \n      >span:not(:nth-child(2)){\n        margin-top: 8px;\n        font-size: 14px;\n      }\n  \n    }\n\n  }\n}\n"]);return p=function(){return n},n}function g(){var n=Object(a.useContext)(j),e=n.state,t=n.dispatch;if(!e.isLoggedIn)return r.a.createElement(s.a,{to:"/login"});var i=e.user,o=i.avatar_url,l=i.name,c=i.public_repos,d=i.followers,u=i.following;return r.a.createElement(f,null,r.a.createElement("div",{className:"container"},r.a.createElement("button",{onClick:function(){t({type:"LOGOUT"})}},"Logout"),r.a.createElement("div",null,r.a.createElement("div",{className:"content"},r.a.createElement("img",{src:o,alt:"test"}),r.a.createElement("span",null,l),r.a.createElement("span",null,c," Repos"),r.a.createElement("span",null,d," Followers"),r.a.createElement("span",null,u," Following")))))}var f=u.a.section(p()),m=t(6),h=t(24),b=t.n(h);function x(){var n=Object(d.a)(["\n  .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    font-family: Arial;\n    \n\n    > div:nth-child(1) {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      transition: 0.3s;\n      width: 25%;\n      height: 45%;\n\n      > h1 {\n        font-size: 2rem;\n        margin-bottom: 20px;\n      }\n\n      > span:nth-child(2) {\n        font-size: 1.1rem;\n        color: #808080;\n        margin-bottom: 70px;\n      }\n\n      > span:nth-child(3) {\n        margin: 10px 0 20px;\n        color: red;\n      }\n\n      .login-container {\n        background-color: #000;\n        width: 70%;\n        border-radius: 3px;\n        color: #fff;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        > .login-link {\n          text-decoration: none;\n          color: #fff;\n          text-transform: uppercase;\n          cursor: default;\n          display: flex;\n          align-items: center;          \n          height: 40px;\n\n          > span:nth-child(2) {\n            margin-left: 5px;\n          }\n        }\n\n        .loader-container {\n          display: flex;\n          justify-content: center;\n          align-items: center;          \n          height: 40px;\n        }\n\n        .loader {\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid #3498db;\n          border-radius: 50%;\n          width: 12px;\n          height: 12px;\n          animation: spin 2s linear infinite;\n        }\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      }\n    }\n  }\n"]);return x=function(){return n},n}function y(){var n=Object(a.useContext)(j),e=n.state,t=n.dispatch,i=Object(a.useState)({errorMessage:"",isLoading:!1}),o=Object(l.a)(i,2),c=o[0],d=o[1],u=e.client_id,p=e.redirect_uri;return Object(a.useEffect)((function(){var n=window.location.href;if(n.includes("?code=")){var a=n.split("?code=");window.history.pushState({},null,a[0]),d(Object(m.a)(Object(m.a)({},c),{},{isLoading:!0}));var r={client_id:e.client_id,redirect_uri:e.redirect_uri,client_secret:e.client_secret,code:a[1]},i=e.proxy_url;fetch(i,{method:"POST",body:JSON.stringify(r)}).then((function(n){return n.json()})).then((function(n){t({type:"LOGIN",payload:{user:n,isLoggedIn:!0}})})).catch((function(n){d({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[e,t,c]),e.isLoggedIn?r.a.createElement(s.a,{to:"/"}):(console.log(e.isLoading),r.a.createElement(E,null,r.a.createElement("section",{className:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome"),r.a.createElement("span",null,"Super amazing app"),r.a.createElement("span",null,c.errorMessage),r.a.createElement("div",{className:"login-container"},c.isLoading?r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{className:"login-link",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(u,"&redirect_uri=").concat(p),onClick:function(){d(Object(m.a)(Object(m.a)({},c),{},{errorMessage:""}))}},r.a.createElement(b.a,null),r.a.createElement("span",null,"Login with GitHub"))))))))}var E=u.a.section(x()),O={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null,client_id:"614fc8b61a8581947537",redirect_uri:"http://localhost:3000/login",client_secret:"9b20db30bf3627bc6d5bce8c74416ff43b9dd599",proxy_url:"http://localhost:5000/authenticate"},v=function(n,e){switch(e.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(e.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(e.payload.user)),console.log(e.payload.isLoggedIn),Object(m.a)(Object(m.a)({},n),{},{isLoggedIn:e.payload.isLoggedIn,user:e.payload.user});case"LOGOUT":return localStorage.clear(),Object(m.a)(Object(m.a)({},n),{},{isLoggedIn:!1,user:null});default:return n}},j=Object(a.createContext)();var L=function(){var n=Object(a.useReducer)(v,O),e=Object(l.a)(n,2),t=e[0],i=e[1];return r.a.createElement(j.Provider,{value:{state:t,dispatch:i}},r.a.createElement(c.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login",component:y}),r.a.createElement(s.b,{path:"/",component:g}))))};o.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.6ea88719.chunk.js.map